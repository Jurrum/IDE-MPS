-- ============================================
-- TECHSTORE E-COMMERCE DATABASE
-- Final Project - Exercise 5
-- ============================================

-- ============================================
-- PHASE 1: DATABASE CREATION
-- ============================================

-- Create the database
-- CREATE DATABASE techstore_db;
-- \c techstore_db


-- ============================================
-- PHASE 2: TABLE CREATION
-- ============================================

-- Customers Table


-- Categories Table (with hierarchical support)


-- Products Table


-- Orders Table


-- Order Items Table


-- Reviews Table


-- Shopping Cart Table


-- ============================================
-- PHASE 3: INDEXES
-- ============================================

-- Add indexes for performance


-- ============================================
-- PHASE 4: VIEWS
-- ============================================

-- View 1: Product Catalog with Categories


-- View 2: Order Summary


-- View 3: Product Reviews Summary


-- View 4: Low Stock Alert


-- ============================================
-- PHASE 5: SAMPLE DATA
-- ============================================

-- Insert Categories


-- Insert Products


-- Insert Customers


-- Insert Orders


-- Insert Order Items


-- Insert Reviews


-- Insert Shopping Cart Items


-- ============================================
-- PHASE 6: BUSINESS ANALYTICS QUERIES
-- ============================================

-- SALES ANALYTICS
-- ----------------

-- 1. Total Revenue by Month


-- 2. Top Products by Revenue


-- 3. Customer Lifetime Value


-- 4. Average Order Value by Month


-- 5. Category Performance


-- INVENTORY MANAGEMENT
-- --------------------

-- 1. Low Stock Alert


-- 2. Out of Stock Products


-- 3. Inventory Value by Category


-- 4. Stock Movement (Last 30 Days)


-- CUSTOMER ANALYTICS
-- ------------------

-- 1. Top Customers by Spending


-- 2. Customer Segmentation


-- 3. Inactive Customers (No orders in 90 days)


-- 4. New Customers (Last Month)


-- 5. Customer Retention Rate


-- PRODUCT ANALYTICS
-- -----------------

-- 1. Product Ratings


-- 2. Top Rated Products


-- 3. Products Without Reviews


-- 4. Review Trends by Month


-- ============================================
-- PHASE 7: STORED PROCEDURES
-- ============================================

-- Procedure 1: Place Order


-- Procedure 2: Update Inventory


-- Procedure 3: Cancel Order


-- Procedure 4: Calculate Shipping


-- ============================================
-- PHASE 8: TRIGGERS
-- ============================================

-- Trigger 1: Update Product Timestamp


-- Trigger 2: Validate Stock


-- Trigger 3: Update Order Total


-- Trigger 4: Archive Old Orders


-- ============================================
-- PHASE 9: FUNCTIONS
-- ============================================

-- Function 1: Calculate Discount


-- Function 2: Get Product Availability


-- Function 3: Format Price


-- Function 4: Calculate Tax


-- ============================================
-- PHASE 10: REPORTS
-- ============================================

-- Report 1: Daily Sales Report


-- Report 2: Monthly Dashboard


-- Report 3: Customer Report


-- Report 4: Inventory Report


-- Report 5: Product Performance Report


-- ============================================
-- BONUS FEATURES
-- ============================================

-- Bonus 1: Wishlist Feature


-- Bonus 2: Coupon System


-- Bonus 3: Product Variants


-- Bonus 4: Shipping Tracking


-- Bonus 5: Return Management


-- Bonus 6: Product Recommendations


-- Bonus 7: Full-Text Search


-- Bonus 8: Audit Trail


-- ============================================
-- TESTING QUERIES
-- ============================================

-- Test data integrity


-- Test query performance


-- Test edge cases


-- ============================================
-- DOCUMENTATION
-- ============================================

/*
DATABASE DESIGN DECISIONS:
--------------------------
1. Normalization Level: 
   - Explain your normalization approach

2. Key Design Choices:
   - Why certain relationships were chosen
   - How you handled specific requirements

3. Performance Considerations:
   - Index strategy
   - Query optimization approaches

4. Security Measures:
   - Data validation
   - Constraint usage

5. Scalability Considerations:
   - How the design handles growth
   - Future improvements

CHALLENGES FACED:
-----------------
1. 
2. 
3. 

LESSONS LEARNED:
----------------
1. 
2. 
3. 
*/
